% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Engine.R
\name{with.Engine}
\alias{with.Engine}
\title{Execute a function with a managed database connection}
\usage{
\method{with}{Engine}(
  engine,
  fun = function(conn) {
 }
)
}
\arguments{
\item{engine}{An Engine object that manages database connections.}

\item{fun}{A function that takes a database connection as its argument and
performs database operations. Default is an empty function.}
}
\value{
The result of the executed function `fun`.
}
\description{
This function provides a way to execute database operations with automatic
connection management. It opens a connection, executes the provided function,
and ensures the connection is closed afterwards, even if an error occurs.
}
\details{
The `with.Engine` function is designed to be used similarly to Python's
`with` statement or SQLAlchemy's session management. It ensures that
database connections are properly opened before use and closed after use,
even in the case of errors.
}
\examples{
\dontrun{
engine <- Engine$new(drv = RSQLite::SQLite(), dbname = ":memory:")
result <- with.Engine(engine, function(conn) {
  DBI::dbGetQuery(conn, "SELECT * FROM my_table")
})
}

}
