<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Why oRm • oRm</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Why oRm">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oRm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/get_started.html">Get Started</a></li>
    <li><a class="dropdown-item" href="../articles/why_oRm.html">Why oRm</a></li>
    <li><a class="dropdown-item" href="../articles/with_shiny.html">Using oRm with Shiny</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kent-orr/oRm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Why oRm</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/kent-orr/oRm/blob/HEAD/vignettes/why_oRm.Rmd" class="external-link"><code>vignettes/why_oRm.Rmd</code></a></small>
      <div class="d-none name"><code>why_oRm.Rmd</code></div>
    </div>

    
    
<p><code>oRm</code> is not designed for analysis. It is made to
facilitate creation, deletion, and modification of data in a
database.</p>
<p>Most R workflows invlove filtering, aggregating, and analyzing entire
datasets. Working with a single row just isn’t where R shines. Another
way to look at it is that the R ecosystem is built for data frames, not
records.</p>
<p>But every once in a while you need to build a quick data governance
or lookup tool that’s operational, not analytical. Or maybe you’re
validating a series of relational database tables and you are tired of
writing a left_join, inner_join, etc. when you need to investigate how
the pieces fit together. In those cases, <code>oRm</code> could be a
useful tool.</p>
<p>Let’s use a pretty basic example of where <code>oRm</code> would be
suitable. Your team is recording measurements of plant growth. You don’t
want an excel sheet on a hard drive to be your source fo truth, no,
you’re thinking a database would be more appropriate. But how to ensure
that observations are recorded accurately and consistently?</p>
<div class="section level2">
<h2 id="using-dbplyr-and-dbi-to-manage-your-database">Using <code>dbplyr</code> and <code>DBI</code> to manage your
database<a class="anchor" aria-label="anchor" href="#using-dbplyr-and-dbi-to-manage-your-database"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbplyr.tidyverse.org/" class="external-link">dbplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the table using a data.frame and dbWriteTable</span></span>
<span><span class="va">initial_data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  observer_id <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  plant_id <span class="op">=</span> <span class="fl">101L</span>,</span>
<span>  measurement_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-07-30"</span><span class="op">)</span>,</span>
<span>  measurement_value <span class="op">=</span> <span class="fl">14.2</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"measurements"</span>, <span class="va">initial_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ===== table setup complete =====</span></span>
<span></span>
<span><span class="co"># Add another row later</span></span>
<span><span class="va">new_row</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  observer_id <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  plant_id <span class="op">=</span> <span class="fl">102L</span>,</span>
<span>  measurement_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-07-31"</span><span class="op">)</span>,</span>
<span>  measurement_value <span class="op">=</span> <span class="fl">15.8</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbAppendTable.html" class="external-link">dbAppendTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"measurements"</span>, <span class="va">new_row</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span></span>
<span><span class="co"># View the table</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"measurements"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">observer_id</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   observer_id plant_id measurement_date measurement_value</span></span>
<span><span class="co">#&gt;         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>           2      102            <span style="text-decoration: underline;">20</span>300              15.8</span></span></code></pre></div>
<p>At this point, you’re mixing <code>DBI</code> calls, and
<code>dplyr</code>. That’s fine until you need to build an interface,
reuse logic across functions, or update a record based on user input.
Suddenly you’re juggling SQL strings, dplyr pipelines, and column names
by hand. So let’s see that in action: One of your team members actually
put in the measurement wrong, it’s 8.15, not 15.8. How would we fix this
record in the database?</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># You have to find the row and update it manually using SQL</span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbExecute.html" class="external-link">dbExecute</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"</span></span>
<span><span class="st">  UPDATE measurements</span></span>
<span><span class="st">  SET measurement_value = 8.15</span></span>
<span><span class="st">  WHERE observer_id = 2</span></span>
<span><span class="st">"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">'SELECT * FROM measurements WHERE observer_id = 2'</span><span class="op">)</span></span>
<span><span class="co">#&gt;   observer_id plant_id measurement_date measurement_value</span></span>
<span><span class="co">#&gt; 1           2      102            20300              8.15</span></span></code></pre></div>
<p>You need to:</p>
<ul>
<li>Remember the correct column names</li>
<li>Re-type the WHERE clause conditions</li>
<li>Hope no one accidentally updates multiple rows</li>
</ul>
<p>There’s no row-level object to work with, you’re always
re-identifying rows with raw conditions.</p>
</div>
<div class="section level2">
<h2 id="using-orm-to-manage-your-database">Using <code>oRm</code> to Manage Your Database<a class="anchor" aria-label="anchor" href="#using-orm-to-manage-your-database"></a>
</h2>
<p>So now let’s use <code>oRm</code> to manage our database. We’re going
to define our table schema and enter our first observation.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kent-orr.github.io/oRm/">oRm</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">engine</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Engine.html">Engine</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  drv <span class="op">=</span> <span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  dbname <span class="op">=</span> <span class="st">":memory:"</span>,</span>
<span>  persist <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">Measurement</span> <span class="op">&lt;-</span> <span class="va">engine</span><span class="op">$</span><span class="fu">model</span><span class="op">(</span></span>
<span>  <span class="st">"measurements"</span>,</span>
<span>  id <span class="op">=</span> <span class="fu"><a href="../reference/Column.html">Column</a></span><span class="op">(</span><span class="st">"INTEGER"</span>, primary_key <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  observer_id <span class="op">=</span> <span class="fu"><a href="../reference/Column.html">Column</a></span><span class="op">(</span><span class="st">"INTEGER"</span><span class="op">)</span>,</span>
<span>  plant_id <span class="op">=</span> <span class="fu"><a href="../reference/ForeignKey.html">ForeignKey</a></span><span class="op">(</span><span class="st">"INTEGER"</span>, <span class="st">'plants.id'</span><span class="op">)</span>,  <span class="co"># we'll define this table shortly</span></span>
<span></span>
<span>  measurement_date <span class="op">=</span> <span class="fu"><a href="../reference/Column.html">Column</a></span><span class="op">(</span><span class="st">"DATE"</span><span class="op">)</span>,</span>
<span>  measurement_value <span class="op">=</span> <span class="fu"><a href="../reference/Column.html">Column</a></span><span class="op">(</span><span class="st">"REAL"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">Measurement</span><span class="op">$</span><span class="fu">create_table</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;TableModel&gt;</span></span>
<span><span class="co">#&gt;   Table: measurements</span></span>
<span><span class="co">#&gt;   Fields:</span></span>
<span><span class="co">#&gt;   🔑 id                 <span style="color: #555555;">INTEGER </span>  </span></span>
<span><span class="co">#&gt;      observer_id        <span style="color: #555555;">INTEGER </span>  </span></span>
<span><span class="co">#&gt;      plant_id           <span style="color: #555555;">INTEGER </span>  </span></span>
<span><span class="co">#&gt;      measurement_date   <span style="color: #555555;">DATE    </span>  </span></span>
<span><span class="co">#&gt;      measurement_value  <span style="color: #555555;">REAL    </span></span></span>
<span></span>
<span><span class="co"># ===== table setup complete =====</span></span>
<span></span>
<span><span class="co"># Add a few observations</span></span>
<span><span class="va">m1</span> <span class="op">=</span> <span class="va">Measurement</span><span class="op">$</span><span class="fu">record</span><span class="op">(</span></span>
<span>  observer_id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  plant_id <span class="op">=</span> <span class="fl">101</span>,</span>
<span>  measurement_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-07-30"</span><span class="op">)</span>,</span>
<span>  measurement_value <span class="op">=</span> <span class="fl">14.2</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">m2</span> <span class="op">=</span> <span class="va">Measurement</span><span class="op">$</span><span class="fu">record</span><span class="op">(</span></span>
<span>  observer_id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  plant_id <span class="op">=</span> <span class="fl">101</span>,</span>
<span>  measurement_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-08-15"</span><span class="op">)</span>,</span>
<span>  measurement_value <span class="op">=</span> <span class="fl">16.0</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">m3</span> <span class="op">=</span> <span class="va">Measurement</span><span class="op">$</span><span class="fu">record</span><span class="op">(</span></span>
<span>  observer_id <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  plant_id <span class="op">=</span> <span class="fl">102</span>,</span>
<span>  measurement_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-07-31"</span><span class="op">)</span>,</span>
<span>  measurement_value <span class="op">=</span> <span class="fl">15.8</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">m1</span></span>
<span><span class="co">#&gt; &lt;Record&gt;: 'measurements'</span></span>
<span><span class="co">#&gt; id: 1</span></span>
<span><span class="co">#&gt; observer_id: 1</span></span>
<span><span class="co">#&gt; plant_id: 101</span></span>
<span><span class="co">#&gt; measurement_date: 20299</span></span>
<span><span class="co">#&gt; measurement_value: 14.2</span></span></code></pre></div>
<p>And oh, yikes. Person 2 put in the measurement wrong. let’s correct
it.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p2</span> <span class="op">=</span> <span class="va">Measurement</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span><span class="va">observer_id</span> <span class="op">==</span> <span class="fl">2</span>, mode<span class="op">=</span><span class="st">'get'</span><span class="op">)</span></span>
<span><span class="va">p2</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span>measurement_value <span class="op">=</span> <span class="fl">8.15</span><span class="op">)</span></span>
<span><span class="va">p2</span></span>
<span><span class="co">#&gt; &lt;Record&gt;: 'measurements'</span></span>
<span><span class="co">#&gt; id: 3</span></span>
<span><span class="co">#&gt; observer_id: 2</span></span>
<span><span class="co">#&gt; plant_id: 102</span></span>
<span><span class="co">#&gt; measurement_date: 20300</span></span>
<span><span class="co">#&gt; measurement_value: 8.15</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="relationships">Relationships<a class="anchor" aria-label="anchor" href="#relationships"></a>
</h2>
<p>So far we’ve looked at <strong>object</strong> models, which are
great for managing a single record, or records in loops. But what about
<strong>relationships</strong> between records? Let’s say we have a
lookup table for our plants. If you were looking closely at the
Measurements table, you might have noticed we designated a foreign key
to the Plants table. We’ll make use of that relationship now.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Plants</span> <span class="op">&lt;-</span> <span class="va">engine</span><span class="op">$</span><span class="fu">model</span><span class="op">(</span></span>
<span>    <span class="st">"plants"</span>,</span>
<span>    id <span class="op">=</span> <span class="fu"><a href="../reference/Column.html">Column</a></span><span class="op">(</span><span class="st">"INTEGER"</span>, primary_key <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    plant_type <span class="op">=</span> <span class="fu"><a href="../reference/Column.html">Column</a></span><span class="op">(</span><span class="st">"TEXT"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">Plants</span><span class="op">$</span><span class="fu">create_table</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;TableModel&gt;</span></span>
<span><span class="co">#&gt;   Table: plants</span></span>
<span><span class="co">#&gt;   Fields:</span></span>
<span><span class="co">#&gt;   🔑 id          <span style="color: #555555;">INTEGER </span>  </span></span>
<span><span class="co">#&gt;      plant_type  <span style="color: #555555;">TEXT    </span></span></span>
<span></span>
<span><span class="co"># and we'll make a handful of plant records</span></span>
<span><span class="va">Plants</span><span class="op">$</span><span class="fu">record</span><span class="op">(</span>id <span class="op">=</span> <span class="fl">101</span>, plant_type <span class="op">=</span> <span class="st">"pea"</span><span class="op">)</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">Plants</span><span class="op">$</span><span class="fu">record</span><span class="op">(</span>id <span class="op">=</span> <span class="fl">102</span>, plant_type <span class="op">=</span> <span class="st">"potato"</span><span class="op">)</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">Plants</span><span class="op">$</span><span class="fu">record</span><span class="op">(</span>id <span class="op">=</span> <span class="fl">103</span>, plant_type <span class="op">=</span> <span class="st">"pea"</span><span class="op">)</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>At this point, our database is aware of the relationship between
Plants and Measurements. But oRm is not. We’ll now
<strong>model</strong> a <strong>relationship</strong> between the two
tables (<strong>objects</strong>) which oRm will use.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/define_relationship.html">define_relationship</a></span><span class="op">(</span></span>
<span>    local_model <span class="op">=</span> <span class="va">Plants</span>,</span>
<span>    local_key <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"one_to_many"</span>,</span>
<span>    related_model <span class="op">=</span> <span class="va">Measurement</span>,</span>
<span>    related_key <span class="op">=</span> <span class="st">"plant_id"</span>,</span>
<span>    ref <span class="op">=</span> <span class="st">"measurements"</span>,</span>
<span>    backref <span class="op">=</span> <span class="st">"plant"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;TableModel&gt;</span></span>
<span><span class="co">#&gt;   Table: plants</span></span>
<span><span class="co">#&gt;   Fields:</span></span>
<span><span class="co">#&gt;   🔑 id          <span style="color: #555555;">INTEGER </span>  </span></span>
<span><span class="co">#&gt;      plant_type  <span style="color: #555555;">TEXT    </span></span></span></code></pre></div>
<p>And after we’ve made that mapping, we can find all the measurements
for a specific plant.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p101</span> <span class="op">=</span> <span class="va">Plants</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="fl">101</span>, mode<span class="op">=</span><span class="st">'get'</span><span class="op">)</span></span>
<span><span class="va">p101</span><span class="op">$</span><span class="fu">relationship</span><span class="op">(</span><span class="st">'measurements'</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;Record&gt;: 'measurements'</span></span>
<span><span class="co">#&gt; id: 1</span></span>
<span><span class="co">#&gt; observer_id: 1</span></span>
<span><span class="co">#&gt; plant_id: 101</span></span>
<span><span class="co">#&gt; measurement_date: 20299</span></span>
<span><span class="co">#&gt; measurement_value: 14.2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; &lt;Record&gt;: 'measurements'</span></span>
<span><span class="co">#&gt; id: 2</span></span>
<span><span class="co">#&gt; observer_id: 1</span></span>
<span><span class="co">#&gt; plant_id: 101</span></span>
<span><span class="co">#&gt; measurement_date: 20315</span></span>
<span><span class="co">#&gt; measurement_value: 16</span></span></code></pre></div>
<p>Or we can look for a specific relationship by filtering</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p101</span><span class="op">$</span><span class="fu">relationship</span><span class="op">(</span><span class="st">'measurements'</span>, <span class="va">measurement_value</span> <span class="op">&lt;</span> <span class="fl">15.0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;Record&gt;: 'measurements'</span></span>
<span><span class="co">#&gt; id: 1</span></span>
<span><span class="co">#&gt; observer_id: 1</span></span>
<span><span class="co">#&gt; plant_id: 101</span></span>
<span><span class="co">#&gt; measurement_date: 20299</span></span>
<span><span class="co">#&gt; measurement_value: 14.2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>In this vignette, you’ve seen how oRm can simplify the process of
inserting, updating, and querying data with structured models instead of
scattered SQL or repeated joins. You’ve also seen how relationships
between records can be declared once and reused throughout your code,
making it easier to write clean, maintainable tools.</p>
<p>But this is just the beginning.</p>
<p>You don’t have to create the tables with oRm to use it — you can map
models onto existing databases, including those already in use at your
workplace. That means you can layer oRm on top of production databases
to build admin dashboards, internal Shiny tools, or one-off data fixers
with confidence.</p>
<p>And once relationships are defined, you can traverse complex data
structures just as easily. Users to logs, organizations to memberships,
or plants to mesaurements.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kent Orr.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
